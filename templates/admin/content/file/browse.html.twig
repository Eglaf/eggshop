<script type="text/javascript">
    var altTexts = {};
</script>

{% for file in images %}

    <img onclick="clickImg('{{ path }}{{ file.storageName }}')" src="{{ path }}{{ file.storageName }}" style="max-height:100px;"/>

    <script type="text/javascript">
        altTexts['{{ path }}{{ file.storageName }}'] = '{{ file.label }} {{ file.description }}';
    </script>

{% endfor %}

<script type="text/javascript">

    /**
     * Clicking on image will load it into the text.
     * @param imagePath
     */
    function clickImg(imagePath) {
        window.parent.opener.CKEDITOR.tools.callFunction(1, imagePath, function () {
            var element, dialog = this.getDialog();
            element = dialog.getContentElement( 'info', 'txtAlt' );
            if ( element ) {
                element.setValue(altTexts[imagePath]);
            }
        });
        self.close();
    }

</script>